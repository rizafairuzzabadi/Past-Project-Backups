{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["generator","rough","createElement","id","x1","y1","x2","y2","type","roughElement","line","rectangle","points","x","y","text","Error","nearPoint","name","Math","abs","onLine","maxDistance","a","b","c","offset","distance","positionWithinElement","element","on","start","end","topLeft","topRight","bottomLeft","bottomRight","some","point","index","nextPoint","sqrt","pow","getElementAtPosition","elements","map","position","find","drawElement","roughCanvas","context","draw","stroke","length","d","reduce","acc","i","arr","x0","y0","push","join","getSvgPathFromStroke","getStroke","fill","Path2D","textBaseline","font","fillText","App","initialState","useState","setIndex","history","setHistory","action","overwrite","newState","historyCopy","updatedState","slice","prevState","useHistory","setElements","undo","redo","setAction","tool","setTool","selectedElement","setSelectedElement","textAreaRef","useRef","download","xd","document","getElementById","img","toDataURL","write","fetch","blob","blobURL","URL","createObjectURL","link","href","click","useLayoutEffect","canvas","getContext","clearRect","width","height","forEach","useEffect","undoRedoFunction","event","metaKey","ctrlKey","key","shiftKey","addEventListener","removeEventListener","textArea","current","focus","value","updateElement","options","elementsCopy","textWidth","measureText","style","display","justifyContent","alignItems","padding","checked","onChange","htmlFor","borderRadius","backgroundColor","color","xmlns","className","viewBox","fillRule","marginLeft","bottom","onClick","border","ref","onBlur","target","top","left","margin","outline","resize","overflow","whiteSpace","background","window","innerWidth","innerHeight","onMouseDown","clientX","clientY","xOffsets","yOffsets","offsetX","offsetY","onMouseMove","cursor","cursorForPosition","newPoints","_","newX1","newY1","coordinates","resizedCoordinates","onMouseUp","includes","adjustmentRequired","minX","min","maxX","max","adjustElementCoordinates","Boolean","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"4UAIMA,EAAYC,IAAMD,YAElBE,EAAgB,SAACC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACzC,OAAQA,GACN,IAAK,OACL,IAAK,YAKH,MAAO,CAAEL,KAAIC,KAAIC,KAAIC,KAAIC,KAAIC,OAAMC,aAHxB,SAATD,EACIR,EAAUU,KAAKN,EAAIC,EAAIC,EAAIC,GAC3BP,EAAUW,UAAUP,EAAIC,EAAIC,EAAKF,EAAIG,EAAKF,IAElD,IAAK,SACH,MAAO,CAAEF,KAAIK,OAAMI,OAAQ,CAAC,CAAEC,EAAGT,EAAIU,EAAGT,KAC1C,IAAK,OACH,MAAO,CAAEF,KAAIK,OAAMJ,KAAIC,KAAIC,KAAIC,KAAIQ,KAAM,IAC3C,QACE,MAAM,IAAIC,MAAJ,+BAAkCR,MAIxCS,EAAY,SAACJ,EAAGC,EAAGV,EAAIC,EAAIa,GAC/B,OAAOC,KAAKC,IAAIP,EAAIT,GAAM,GAAKe,KAAKC,IAAIN,EAAIT,GAAM,EAAIa,EAAO,MAGzDG,EAAS,SAACjB,EAAIC,EAAIC,EAAIC,EAAIM,EAAGC,GAAwB,IAArBQ,EAAoB,uDAAN,EAC5CC,EAAI,CAAEV,EAAGT,EAAIU,EAAGT,GAChBmB,EAAI,CAAEX,EAAGP,EAAIQ,EAAGP,GAChBkB,EAAI,CAAEZ,IAAGC,KACTY,EAASC,EAASJ,EAAGC,IAAMG,EAASJ,EAAGE,GAAKE,EAASH,EAAGC,IAC9D,OAAON,KAAKC,IAAIM,GAAUJ,EAAc,SAAW,MAG/CM,EAAwB,SAACf,EAAGC,EAAGe,GACnC,IAAQrB,EAAyBqB,EAAzBrB,KAAMJ,EAAmByB,EAAnBzB,GAAIE,EAAeuB,EAAfvB,GAAID,EAAWwB,EAAXxB,GAAIE,EAAOsB,EAAPtB,GAC1B,OAAQC,GACN,IAAK,OACH,IAAMsB,EAAKT,EAAOjB,EAAIC,EAAIC,EAAIC,EAAIM,EAAGC,GAC/BiB,EAAQd,EAAUJ,EAAGC,EAAGV,EAAIC,EAAI,SAChC2B,EAAMf,EAAUJ,EAAGC,EAAGR,EAAIC,EAAI,OACpC,OAAOwB,GAASC,GAAOF,EACzB,IAAK,YACH,IAAMG,EAAUhB,EAAUJ,EAAGC,EAAGV,EAAIC,EAAI,MAClC6B,EAAWjB,EAAUJ,EAAGC,EAAGR,EAAID,EAAI,MACnC8B,EAAalB,EAAUJ,EAAGC,EAAGV,EAAIG,EAAI,MACrC6B,EAAcnB,EAAUJ,EAAGC,EAAGR,EAAIC,EAAI,MAE5C,OAAO0B,GAAWC,GAAYC,GAAcC,IAD7BvB,GAAKT,GAAMS,GAAKP,GAAMQ,GAAKT,GAAMS,GAAKP,EAAK,SAAW,MAEvE,IAAK,SAMH,OALwBsB,EAAQjB,OAAOyB,MAAK,SAACC,EAAOC,GAClD,IAAMC,EAAYX,EAAQjB,OAAO2B,EAAQ,GACzC,QAAKC,GACiE,MAA/DnB,EAAOiB,EAAMzB,EAAGyB,EAAMxB,EAAG0B,EAAU3B,EAAG2B,EAAU1B,EAAGD,EAAGC,EAAG,MAEzC,SAAW,KACtC,IAAK,OACH,OAAOD,GAAKT,GAAMS,GAAKP,GAAMQ,GAAKT,GAAMS,GAAKP,EAAK,SAAW,KAC/D,QACE,MAAM,IAAIS,MAAJ,+BAAkCR,MAIxCmB,EAAW,SAACJ,EAAGC,GAAJ,OAAUL,KAAKsB,KAAKtB,KAAKuB,IAAInB,EAAEV,EAAIW,EAAEX,EAAG,GAAKM,KAAKuB,IAAInB,EAAET,EAAIU,EAAEV,EAAG,KAE5E6B,EAAuB,SAAC9B,EAAGC,EAAG8B,GAClC,OAAOA,EACJC,KAAI,SAAAhB,GAAO,kCAAUA,GAAV,IAAmBiB,SAAUlB,EAAsBf,EAAGC,EAAGe,QACpEkB,MAAK,SAAAlB,GAAO,OAAyB,OAArBA,EAAQiB,aA4FvBE,EAAc,SAACC,EAAaC,EAASrB,GACzC,OAAQA,EAAQrB,MACd,IAAK,OACL,IAAK,YACHyC,EAAYE,KAAKtB,EAAQpB,cACzB,MACF,IAAK,SACH,IAAM2C,EAvBiB,SAAAA,GAC3B,IAAKA,EAAOC,OAAQ,MAAO,GAE3B,IAAMC,EAAIF,EAAOG,QACf,SAACC,EAAD,EAAgBC,EAAGC,GAAS,IAAD,mBAApBC,EAAoB,KAAhBC,EAAgB,KACzB,cAAiBF,GAAKD,EAAI,GAAKC,EAAIL,QAAnC,GAAOjD,EAAP,KAAWC,EAAX,KAEA,OADAmD,EAAIK,KAAKF,EAAIC,GAAKD,EAAKvD,GAAM,GAAIwD,EAAKvD,GAAM,GACrCmD,IAJD,CAMP,KANO,mBAMCJ,EAAO,IANR,CAMY,OAItB,OADAE,EAAEO,KAAK,KACAP,EAAEQ,KAAK,KAUKC,CAAqBC,YAAUnC,EAAQjB,SACtDsC,EAAQe,KAAK,IAAIC,OAAOd,IACxB,MACF,IAAK,OACHF,EAAQiB,aAAe,MACvBjB,EAAQkB,KAAO,kBACflB,EAAQmB,SAASxC,EAAQd,KAAMc,EAAQzB,GAAIyB,EAAQxB,IACnD,MACF,QACE,MAAM,IAAIW,MAAJ,+BAAkCa,EAAQrB,SA8SvC8D,EAxSH,WACV,MA9DiB,SAAAC,GACjB,MAA0BC,mBAAS,GAAnC,mBAAOjC,EAAP,KAAckC,EAAd,KACA,EAA8BD,mBAAS,CAACD,IAAxC,mBAAOG,EAAP,KAAgBC,EAAhB,KAkBA,MAAO,CAACD,EAAQnC,GAhBC,SAACqC,GAA+B,IAAvBC,EAAsB,wDACxCC,EAA6B,oBAAXF,EAAwBA,EAAOF,EAAQnC,IAAUqC,EACzE,GAAIC,EAAW,CACb,IAAME,EAAW,YAAOL,GACxBK,EAAYxC,GAASuC,EACrBH,EAAWI,OACN,CACL,IAAMC,EAAe,YAAIN,GAASO,MAAM,EAAG1C,EAAQ,GACnDoC,EAAW,GAAD,mBAAKK,GAAL,CAAmBF,KAC7BL,GAAS,SAAAS,GAAS,OAAIA,EAAY,OAIzB,kBAAM3C,EAAQ,GAAKkC,GAAS,SAAAS,GAAS,OAAIA,EAAY,MACrD,kBAAM3C,EAAQmC,EAAQrB,OAAS,GAAKoB,GAAS,SAAAS,GAAS,OAAIA,EAAY,OA4CvCC,CAAW,IAAvD,mBAAOvC,EAAP,KAAiBwC,EAAjB,KAA8BC,EAA9B,KAAoCC,EAApC,KACA,EAA4Bd,mBAAS,QAArC,mBAAOI,EAAP,KAAeW,EAAf,KACA,EAAwBf,mBAAS,QAAjC,mBAAOgB,EAAP,KAAaC,EAAb,KACA,EAA8CjB,mBAAS,MAAvD,mBAAOkB,EAAP,KAAwBC,EAAxB,KACMC,EAAcC,mBAGZC,GAFUD,iBAAO,MAET,uCAAG,oCAAAtE,EAAA,6DACXwE,EAAKC,SAASC,eAAe,UAC7BC,EAASH,EAAGI,UAAU,aAC1BH,SAASI,MAAM,aAAaF,EAAI,OAHjB,SAKWG,MAAMH,GALjB,8BAKuBI,OALvB,OAKTA,EALS,OAMTC,EAAUC,IAAIC,gBAAgBH,IAC9BI,EAAOV,SAAS9F,cAAc,MAC/ByG,KAAOJ,EACZG,EAAKZ,SAAW,YAChBY,EAAKE,QAVU,4CAAH,sDAahBC,2BAAgB,WACd,IAAMC,EAASd,SAASC,eAAe,UACjC/C,EAAU4D,EAAOC,WAAW,MAClC7D,EAAQ8D,UAAU,EAAG,EAAGF,EAAOG,MAAOH,EAAOI,QAE7C,IAAMjE,EAAchD,IAAM6G,OAAOA,GAEjClE,EAASuE,SAAQ,SAAAtF,GACA,YAAX+C,GAAwBc,EAAgBvF,KAAO0B,EAAQ1B,IAC3D6C,EAAYC,EAAaC,EAASrB,QAEnC,CAACe,EAAUgC,EAAQc,IAEtB0B,qBAAU,WACR,IAAMC,EAAmB,SAAAC,IAClBA,EAAMC,SAAWD,EAAME,UAA0B,MAAdF,EAAMG,MACxCH,EAAMI,SACRpC,IAEAD,MAMN,OADAW,SAAS2B,iBAAiB,UAAWN,GAC9B,WACLrB,SAAS4B,oBAAoB,UAAWP,MAEzC,CAAChC,EAAMC,IAEV8B,qBAAU,WACR,IAAMS,EAAWjC,EAAYkC,QACd,YAAXlD,IACFiD,EAASE,QACTF,EAASG,MAAQtC,EAAgB3E,QAElC,CAAC6D,EAAQc,IAEZ,IAAMuC,EAAgB,SAAC9H,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAM0H,GAC/C,IAAMC,EAAY,YAAOvF,GAEzB,OAAQpC,GACN,IAAK,OACL,IAAK,YACH2H,EAAahI,GAAMD,EAAcC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACrD,MACF,IAAK,SACH2H,EAAahI,GAAIS,OAAjB,sBAA8BuH,EAAahI,GAAIS,QAA/C,CAAuD,CAAEC,EAAGP,EAAIQ,EAAGP,KACnE,MACF,IAAK,OACH,IAAM6H,EAAYpC,SACfC,eAAe,UACfc,WAAW,MACXsB,YAAYH,EAAQnH,MAAMkG,MAE7BkB,EAAahI,GAAb,2BACKD,EAAcC,EAAIC,EAAIC,EAAID,EAAKgI,EAAW/H,EAF5B,GAE6CG,IADhE,IAEEO,KAAMmH,EAAQnH,OAEhB,MACF,QACE,MAAM,IAAIC,MAAJ,+BAAkCR,IAG5C4E,EAAY+C,GAAc,IAmH5B,OACE,6BACE,yBAAKG,MAAO,CAACC,QAAS,OAASC,eAAe,SAAUC,WAAW,SAAUC,QAAQ,SACrF,yBAAKJ,MAAO,CAAExF,SAAU,QAAQyF,QAAS,OAAQC,eAAe,SAAUC,WAAW,WACnF,2BACEjI,KAAK,QACLL,GAAG,YACHwI,QAAkB,cAATnD,EACToD,SAAU,kBAAMnD,EAAQ,cACxB6C,MAAO,CAAEC,QAAQ,UAEnB,2BAAOM,QAAQ,YAAYP,MAAO,CAAEI,QAAQ,OAAQI,aAAc,oBAAqBC,gBAAiB,UAAWC,MAAM,UAAU,yBAAKC,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAKjD,KAAK,eAAeiF,UAAU,sBAAsBC,QAAQ,aAC9P,0BAAM7F,EAAE,6KACR,0BAAMA,EAAE,4GAER,2BAAO9C,KAAK,QAAQL,GAAG,OAAOwI,QAAkB,SAATnD,EAAiBoD,SAAU,kBAAMnD,EAAQ,SAAS6C,MAAO,CAAEC,QAAQ,UAC1G,2BAAOM,QAAQ,OAAOP,MAAO,CAACI,QAAQ,OAAQI,aAAc,MAAOC,gBAAiB,UAAWC,MAAM,UAAU,yBAAKC,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAMjD,KAAK,eAAeiF,UAAU,wBAAwBC,QAAQ,aAC7O,0BAAMC,SAAS,UAAU9F,EAAE,2UAE3B,2BACE9C,KAAK,QACLL,GAAG,YACHwI,QAAkB,cAATnD,EACToD,SAAU,kBAAMnD,EAAQ,cACxB6C,MAAO,CAAEC,QAAQ,OAAQc,WAAY,WAEvC,2BAAOR,QAAQ,YAAYP,MAAO,CAAEI,QAAQ,OAAQI,aAAc,MAAOC,gBAAiB,UAAWC,MAAM,UACzG,yBAAKC,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAMjD,KAAK,eAAeiF,UAAU,eAAeC,QAAQ,aACrH,0BAAM7F,EAAE,sJAEV,2BACE9C,KAAK,QACLL,GAAG,SACHwI,QAAkB,WAATnD,EACToD,SAAU,kBAAMnD,EAAQ,WACxB6C,MAAO,CAAEC,QAAQ,UAEnB,2BAAOM,QAAQ,SAASP,MAAO,CAAEI,QAAQ,OAAQI,aAAc,MAAOC,gBAAiB,UAAWC,MAAM,UAAU,yBAAKC,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAKjD,KAAK,eAAeiF,UAAU,eAAeC,QAAQ,aACtO,0BAAM7F,EAAE,yZAER,2BAAO9C,KAAK,QAAQL,GAAG,OAAOwI,QAAkB,SAATnD,EAAiBoD,SAAU,kBAAMnD,EAAQ,SAAS6C,MAAO,CAAEC,QAAQ,UAC1G,2BAAOM,QAAQ,OAAOP,MAAO,CAAEI,QAAQ,OAAQI,aAAc,oBAAqBC,gBAAiB,UAAWC,MAAM,UAAU,yBAAKC,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAMjD,KAAK,eAAeiF,UAAU,kBAAkBC,QAAQ,aACtP,0BAAM7F,EAAE,kMACR,0BAAMA,EAAE,4LAMV,yBAAKgF,MAAO,CAAExF,SAAU,QAASwG,OAAQ,EAAGZ,QAAS,KACnD,4BAAQa,QAASlE,EAAMiD,MAAO,CAAES,gBAAiB,cAAeS,OAAO,oBACvE,yBAAKP,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAKjD,KAAK,eAAeiF,UAAU,mBAAmBC,QAAQ,aACxH,0BAAMC,SAAS,UAAU9F,EAAE,oJAE3B,4BAAQiG,QAASjE,EAAMgD,MAAO,CAACS,gBAAiB,cAAeS,OAAO,kBAAmBd,QAAQ,SAAU,yBAAKO,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAKjD,KAAK,eAAeiF,UAAU,oBAAoBC,QAAQ,aACpO,0BAAMC,SAAS,UAAU9F,EAAE,oJAE3B,4BAAQiG,QAASzD,EAAUwC,MAAO,CAACS,gBAAiB,cAAeS,OAAO,kBAAmBd,QAAQ,SAAU,yBAAKO,MAAM,6BAA6BhC,MAAM,KAAKC,OAAO,KAAKjD,KAAK,eAAeiF,UAAU,iBAAiBC,QAAQ,aACrO,0BAAM7F,EAAE,4IACR,0BAAMA,EAAE,yIAGE,YAAXsB,EACC,8BACE6E,IAAK7D,EACL8D,OAxEW,SAAApC,GACjB,IAAQnH,EAAqBuF,EAArBvF,GAAIC,EAAiBsF,EAAjBtF,GAAIC,EAAaqF,EAAbrF,GAAIG,EAASkF,EAATlF,KACpB+E,EAAU,QACVI,EAAmB,MACnBsC,EAAc9H,EAAIC,EAAIC,EAAI,KAAM,KAAMG,EAAM,CAAEO,KAAMuG,EAAMqC,OAAO3B,SAqE3DM,MAAO,CACLxF,SAAU,QACV8G,IAAKlE,EAAgBrF,GAAK,EAC1BwJ,KAAMnE,EAAgBtF,GACtBgE,KAAM,kBACN0F,OAAQ,EACRpB,QAAS,EACTc,OAAQ,EACRO,QAAS,EACTC,OAAQ,OACRC,SAAU,SACVC,WAAY,MACZC,WAAY,iBAGd,KACJ,4BACEhK,GAAG,SACH8G,MAAOmD,OAAOC,WACdnD,OAAQkD,OAAOE,YACfC,YAtMkB,SAAAjD,GACtB,GAAe,YAAX1C,EAAJ,CAEA,IAAM4F,EAAsBlD,EAAtBkD,QAAUC,EAAYnD,EAAZmD,QAGhB,GAFAD,GAAoB,GACpBC,GAAoB,GACP,cAATjF,EAAsB,CACxB,IAAM3D,EAAUc,EAAqB6H,EAASC,EAAS7H,GACvD,GAAIf,EAAS,CACX,GAAqB,WAAjBA,EAAQrB,KAAmB,CAC7B,IAAMkK,EAAW7I,EAAQjB,OAAOiC,KAAI,SAAAP,GAAK,OAAIkI,EAAUlI,EAAMzB,KACvD8J,EAAW9I,EAAQjB,OAAOiC,KAAI,SAAAP,GAAK,OAAImI,EAAUnI,EAAMxB,KAC7D6E,EAAmB,2BAAK9D,GAAN,IAAe6I,WAAUC,kBACtC,CACL,IAAMC,EAAUJ,EAAU3I,EAAQzB,GAC5ByK,EAAUJ,EAAU5I,EAAQxB,GAClCsF,EAAmB,2BAAK9D,GAAN,IAAe+I,UAASC,aAE5CzF,GAAY,SAAAF,GAAS,OAAIA,KAEA,WAArBrD,EAAQiB,SACVyC,EAAU,UAEVA,EAAU,iBAGT,CACL,IAAMpF,EAAKyC,EAASS,OACdxB,EAAU3B,EAAcC,EAAIqK,EAASC,EAASD,EAASC,EAASjF,GACtEJ,GAAY,SAAAF,GAAS,4BAAQA,GAAR,CAAmBrD,OACxC8D,EAAmB9D,GAEnB0D,EAAmB,SAATC,EAAkB,UAAY,cAuKtCsF,YAnKkB,SAAAxD,GACtB,IAAMkD,EAAsBlD,EAAtBkD,QAAUC,EAAYnD,EAAZmD,QAKhB,GAJAD,GAAoB,GACpBC,GAAoB,GAGP,cAATjF,EAAsB,CACxB,IAAM3D,EAAUc,EAAqB6H,EAASC,EAAS7H,GACvD0E,EAAMqC,OAAOrB,MAAMyC,OAASlJ,EAlOR,SAAAiB,GACxB,OAAQA,GACN,IAAK,KACL,IAAK,KACL,IAAK,QACL,IAAK,MACH,MAAO,cACT,IAAK,KACL,IAAK,KACH,MAAO,cACT,QACE,MAAO,QAuN+BkI,CAAkBnJ,EAAQiB,UAAY,UAG9E,GAAe,YAAX8B,EAAsB,CACxB,IAAMrC,EAAQK,EAASS,OAAS,EAChC,EAAmBT,EAASL,GAApBnC,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,GACZ4H,EAAc1F,EAAOnC,EAAIC,EAAImK,EAASC,EAASjF,QAC1C,GAAe,WAAXZ,EACT,GAA6B,WAAzBc,EAAgBlF,KAAmB,CACrC,IAAMyK,EAAYvF,EAAgB9E,OAAOiC,KAAI,SAACqI,EAAG3I,GAAJ,MAAe,CAC1D1B,EAAG2J,EAAU9E,EAAgBgF,SAASnI,GACtCzB,EAAG2J,EAAU/E,EAAgBiF,SAASpI,OAElC4F,EAAY,YAAOvF,GACzBuF,EAAazC,EAAgBvF,IAA7B,2BACKgI,EAAazC,EAAgBvF,KADlC,IAEES,OAAQqK,IAEV7F,EAAY+C,GAAc,OACrB,CACL,IAAQhI,EAA+CuF,EAA/CvF,GAAIC,EAA2CsF,EAA3CtF,GAAIE,EAAuCoF,EAAvCpF,GAAID,EAAmCqF,EAAnCrF,GAAIE,EAA+BmF,EAA/BnF,GAAIC,EAA2BkF,EAA3BlF,KAAMoK,EAAqBlF,EAArBkF,QAASC,EAAYnF,EAAZmF,QACrC5D,EAAQ3G,EAAKF,EACb8G,EAAS3G,EAAKF,EACd8K,EAAQX,EAAUI,EAClBQ,EAAQX,EAAUI,EAClB3C,EAAmB,SAAT1H,EAAkB,CAAEO,KAAM2E,EAAgB3E,MAAS,GACnEkH,EAAc9H,EAAIgL,EAAOC,EAAOD,EAAQlE,EAAOmE,EAAQlE,EAAQ1G,EAAM0H,QAElE,GAAe,aAAXtD,EAAuB,CAChC,IAAQzE,EAAuCuF,EAAvCvF,GAAIK,EAAmCkF,EAAnClF,KAAMsC,EAA6B4C,EAA7B5C,SAAauI,EAA/B,YAA+C3F,EAA/C,GACA,EAjPqB,SAAC8E,EAASC,EAAS3H,EAAUuI,GACtD,IAAQjL,EAAmBiL,EAAnBjL,GAAIC,EAAegL,EAAfhL,GAAIC,EAAW+K,EAAX/K,GAAIC,EAAO8K,EAAP9K,GACpB,OAAQuC,GACN,IAAK,KACL,IAAK,QACH,MAAO,CAAE1C,GAAIoK,EAASnK,GAAIoK,EAASnK,KAAIC,MACzC,IAAK,KACH,MAAO,CAAEH,KAAIC,GAAIoK,EAASnK,GAAIkK,EAASjK,MACzC,IAAK,KACH,MAAO,CAAEH,GAAIoK,EAASnK,KAAIC,KAAIC,GAAIkK,GACpC,IAAK,KACL,IAAK,MACH,MAAO,CAAErK,KAAIC,KAAIC,GAAIkK,EAAUjK,GAAIkK,GACrC,QACE,OAAO,MAmOoBa,CAAmBd,EAASC,EAAS3H,EAAUuI,GAAlEjL,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,GAAIC,EAAhB,EAAgBA,GAAIC,EAApB,EAAoBA,GACpB0H,EAAc9H,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,KA6HhC+K,UAzHgB,SAAAjE,GACpB,IAAQkD,EAAqBlD,EAArBkD,QAASC,EAAYnD,EAAZmD,QACjB,GAAI/E,EAAiB,CACnB,GAC2B,SAAzBA,EAAgBlF,MAChBgK,EAAU9E,EAAgBkF,UAAYlF,EAAgBtF,IACtDqK,EAAU/E,EAAgBmF,UAAYnF,EAAgBrF,GAGtD,YADAkF,EAAU,WAIZ,IAAMhD,EAAQmD,EAAgBvF,GAC9B,EAAqByC,EAASL,GAAtBpC,EAAR,EAAQA,GAAIK,EAAZ,EAAYA,KACZ,IAAgB,YAAXoE,GAAmC,aAAXA,IAvLR,SAAApE,GAAI,MAAI,CAAC,OAAQ,aAAagL,SAAShL,GAuLLiL,CAAmBjL,GAAO,CAC/E,MArSyB,SAAAqB,GAC/B,IAAQrB,EAAyBqB,EAAzBrB,KAAMJ,EAAmByB,EAAnBzB,GAAIC,EAAewB,EAAfxB,GAAIC,EAAWuB,EAAXvB,GAAIC,EAAOsB,EAAPtB,GAC1B,GAAa,cAATC,EAAsB,CACxB,IAAMkL,EAAOvK,KAAKwK,IAAIvL,EAAIE,GACpBsL,EAAOzK,KAAK0K,IAAIzL,EAAIE,GAG1B,MAAO,CAAEF,GAAIsL,EAAMrL,GAFNc,KAAKwK,IAAItL,EAAIE,GAEGD,GAAIsL,EAAMrL,GAD1BY,KAAK0K,IAAIxL,EAAIE,IAG1B,OAAIH,EAAKE,GAAOF,IAAOE,GAAMD,EAAKE,EACzB,CAAEH,KAAIC,KAAIC,KAAIC,MAEd,CAAEH,GAAIE,EAAID,GAAIE,EAAID,GAAIF,EAAIG,GAAIF,GAyRRyL,CAAyBlJ,EAASL,IAArDnC,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,GAAIC,EAAhB,EAAgBA,GAAIC,EAApB,EAAoBA,GACpB0H,EAAc9H,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAIvB,YAAXoE,IAEJW,EAAU,QACVI,EAAmB,SA4FjB,YCtccoG,QACW,cAA7B3B,OAAO4B,SAASC,UAEe,UAA7B7B,OAAO4B,SAASC,UAEhB7B,OAAO4B,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFrG,SAASC,eAAe,kBDyHpB,kBAAmBqG,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAME,c","file":"static/js/main.9133fe99.chunk.js","sourcesContent":["import React, { useEffect, useLayoutEffect, useRef, useState } from \"react\";\r\nimport rough from \"roughjs/bundled/rough.esm\";\r\nimport getStroke from \"perfect-freehand\";\r\n\r\nconst generator = rough.generator();\r\n\r\nconst createElement = (id, x1, y1, x2, y2, type) => {\r\n  switch (type) {\r\n    case \"line\":\r\n    case \"rectangle\":\r\n      const roughElement =\r\n        type === \"line\"\r\n          ? generator.line(x1, y1, x2, y2)\r\n          : generator.rectangle(x1, y1, x2 - x1, y2 - y1);\r\n      return { id, x1, y1, x2, y2, type, roughElement };\r\n    case \"pencil\":\r\n      return { id, type, points: [{ x: x1, y: y1 }] };\r\n    case \"text\":\r\n      return { id, type, x1, y1, x2, y2, text: \"\" };\r\n    default:\r\n      throw new Error(`Type not recognised: ${type}`);\r\n  }\r\n};\r\n\r\nconst nearPoint = (x, y, x1, y1, name) => {\r\n  return Math.abs(x - x1) < 5 && Math.abs(y - y1) < 5 ? name : null;\r\n};\r\n\r\nconst onLine = (x1, y1, x2, y2, x, y, maxDistance = 1) => {\r\n  const a = { x: x1, y: y1 };\r\n  const b = { x: x2, y: y2 };\r\n  const c = { x, y };\r\n  const offset = distance(a, b) - (distance(a, c) + distance(b, c));\r\n  return Math.abs(offset) < maxDistance ? \"inside\" : null;\r\n};\r\n\r\nconst positionWithinElement = (x, y, element) => {\r\n  const { type, x1, x2, y1, y2 } = element;\r\n  switch (type) {\r\n    case \"line\":\r\n      const on = onLine(x1, y1, x2, y2, x, y);\r\n      const start = nearPoint(x, y, x1, y1, \"start\");\r\n      const end = nearPoint(x, y, x2, y2, \"end\");\r\n      return start || end || on;\r\n    case \"rectangle\":\r\n      const topLeft = nearPoint(x, y, x1, y1, \"tl\");\r\n      const topRight = nearPoint(x, y, x2, y1, \"tr\");\r\n      const bottomLeft = nearPoint(x, y, x1, y2, \"bl\");\r\n      const bottomRight = nearPoint(x, y, x2, y2, \"br\");\r\n      const inside = x >= x1 && x <= x2 && y >= y1 && y <= y2 ? \"inside\" : null;\r\n      return topLeft || topRight || bottomLeft || bottomRight || inside;\r\n    case \"pencil\":\r\n      const betweenAnyPoint = element.points.some((point, index) => {\r\n        const nextPoint = element.points[index + 1];\r\n        if (!nextPoint) return false;\r\n        return onLine(point.x, point.y, nextPoint.x, nextPoint.y, x, y, 5) != null;\r\n      });\r\n      return betweenAnyPoint ? \"inside\" : null;\r\n    case \"text\":\r\n      return x >= x1 && x <= x2 && y >= y1 && y <= y2 ? \"inside\" : null;\r\n    default:\r\n      throw new Error(`Type not recognised: ${type}`);\r\n  }\r\n};\r\n\r\nconst distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\r\n\r\nconst getElementAtPosition = (x, y, elements) => {\r\n  return elements\r\n    .map(element => ({ ...element, position: positionWithinElement(x, y, element) }))\r\n    .find(element => element.position !== null);\r\n};\r\n\r\nconst adjustElementCoordinates = element => {\r\n  const { type, x1, y1, x2, y2 } = element;\r\n  if (type === \"rectangle\") {\r\n    const minX = Math.min(x1, x2);\r\n    const maxX = Math.max(x1, x2);\r\n    const minY = Math.min(y1, y2);\r\n    const maxY = Math.max(y1, y2);\r\n    return { x1: minX, y1: minY, x2: maxX, y2: maxY };\r\n  } else {\r\n    if (x1 < x2 || (x1 === x2 && y1 < y2)) {\r\n      return { x1, y1, x2, y2 };\r\n    } else {\r\n      return { x1: x2, y1: y2, x2: x1, y2: y1 };\r\n    }\r\n  }\r\n};\r\n\r\nconst cursorForPosition = position => {\r\n  switch (position) {\r\n    case \"tl\":\r\n    case \"br\":\r\n    case \"start\":\r\n    case \"end\":\r\n      return \"nwse-resize\";\r\n    case \"tr\":\r\n    case \"bl\":\r\n      return \"nesw-resize\";\r\n    default:\r\n      return \"move\";\r\n  }\r\n};\r\n\r\nconst resizedCoordinates = (clientX, clientY, position, coordinates) => {\r\n  const { x1, y1, x2, y2 } = coordinates;\r\n  switch (position) {\r\n    case \"tl\":\r\n    case \"start\":\r\n      return { x1: clientX, y1: clientY, x2, y2 };\r\n    case \"tr\":\r\n      return { x1, y1: clientY, x2: clientX, y2 };\r\n    case \"bl\":\r\n      return { x1: clientX, y1, x2, y2: clientY };\r\n    case \"br\":\r\n    case \"end\":\r\n      return { x1, y1, x2: clientX , y2: clientY };\r\n    default:\r\n      return null; //should not really get here...\r\n  }\r\n};\r\n\r\nconst useHistory = initialState => {\r\n  const [index, setIndex] = useState(0);\r\n  const [history, setHistory] = useState([initialState]);\r\n\r\n  const setState = (action, overwrite = false) => {\r\n    const newState = typeof action === \"function\" ? action(history[index]) : action;\r\n    if (overwrite) {\r\n      const historyCopy = [...history];\r\n      historyCopy[index] = newState;\r\n      setHistory(historyCopy);\r\n    } else {\r\n      const updatedState = [...history].slice(0, index + 1);\r\n      setHistory([...updatedState, newState]);\r\n      setIndex(prevState => prevState + 1);\r\n    }\r\n  };\r\n\r\n  const undo = () => index > 0 && setIndex(prevState => prevState - 1);\r\n  const redo = () => index < history.length - 1 && setIndex(prevState => prevState + 1);\r\n\r\n  return [history[index], setState, undo, redo];\r\n};\r\n\r\nconst getSvgPathFromStroke = stroke => {\r\n  if (!stroke.length) return \"\";\r\n\r\n  const d = stroke.reduce(\r\n    (acc, [x0, y0], i, arr) => {\r\n      const [x1, y1] = arr[(i + 1) % arr.length];\r\n      acc.push(x0, y0, (x0 + x1) / 2, (y0 + y1) / 2);\r\n      return acc;\r\n    },\r\n    [\"M\", ...stroke[0], \"Q\"]\r\n  );\r\n\r\n  d.push(\"Z\");\r\n  return d.join(\" \");\r\n};\r\n\r\nconst drawElement = (roughCanvas, context, element) => {\r\n  switch (element.type) {\r\n    case \"line\":\r\n    case \"rectangle\":\r\n      roughCanvas.draw(element.roughElement);\r\n      break;\r\n    case \"pencil\":\r\n      const stroke = getSvgPathFromStroke(getStroke(element.points));\r\n      context.fill(new Path2D(stroke));\r\n      break;\r\n    case \"text\":\r\n      context.textBaseline = \"top\";\r\n      context.font = \"24px sans-serif\";\r\n      context.fillText(element.text, element.x1, element.y1);\r\n      break;\r\n    default:\r\n      throw new Error(`Type not recognised: ${element.type}`);\r\n  }\r\n};\r\n\r\nconst adjustmentRequired = type => [\"line\", \"rectangle\"].includes(type);\r\n\r\nconst App = () => {\r\n  const [elements, setElements, undo, redo] = useHistory([]);\r\n  const [action, setAction] = useState(\"none\");\r\n  const [tool, setTool] = useState(\"text\");\r\n  const [selectedElement, setSelectedElement] = useState(null);\r\n  const textAreaRef = useRef();\r\n  const canvasRef = useRef(null);\r\n\r\n    const download = async () => {\r\n      var xd = document.getElementById(\"canvas\");\r\n      var img    = xd.toDataURL(\"image/png\");\r\n      document.write('<img src=\"'+img+'\"/>');\r\n\r\n      const blob = await (await fetch(img)).blob();\r\n      const blobURL = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = blobURL;\r\n      link.download = \"image.png\";\r\n      link.click();\r\n    };\r\n\r\n  useLayoutEffect(() => {\r\n    const canvas = document.getElementById(\"canvas\");\r\n    const context = canvas.getContext(\"2d\");\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    const roughCanvas = rough.canvas(canvas);\r\n\r\n    elements.forEach(element => {\r\n      if (action === \"writing\" && selectedElement.id === element.id) return;\r\n      drawElement(roughCanvas, context, element);\r\n    });\r\n  }, [elements, action, selectedElement]);\r\n\r\n  useEffect(() => {\r\n    const undoRedoFunction = event => {\r\n      if ((event.metaKey || event.ctrlKey) && event.key === \"z\") {\r\n        if (event.shiftKey) {\r\n          redo();\r\n        } else {\r\n          undo();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", undoRedoFunction);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", undoRedoFunction);\r\n    };\r\n  }, [undo, redo]);\r\n\r\n  useEffect(() => {\r\n    const textArea = textAreaRef.current;\r\n    if (action === \"writing\") {\r\n      textArea.focus();\r\n      textArea.value = selectedElement.text;\r\n    }\r\n  }, [action, selectedElement]);\r\n\r\n  const updateElement = (id, x1, y1, x2, y2, type, options) => {\r\n    const elementsCopy = [...elements];\r\n\r\n    switch (type) {\r\n      case \"line\":\r\n      case \"rectangle\":\r\n        elementsCopy[id] = createElement(id, x1, y1, x2, y2, type);\r\n        break;\r\n      case \"pencil\":\r\n        elementsCopy[id].points = [...elementsCopy[id].points, { x: x2, y: y2 }];\r\n        break;\r\n      case \"text\":\r\n        const textWidth = document\r\n          .getElementById(\"canvas\")\r\n          .getContext(\"2d\")\r\n          .measureText(options.text).width;\r\n        const textHeight = 24;\r\n        elementsCopy[id] = {\r\n          ...createElement(id, x1, y1, x1 + textWidth, y1 + textHeight, type),\r\n          text: options.text,\r\n        };\r\n        break;\r\n      default:\r\n        throw new Error(`Type not recognised: ${type}`);\r\n    }\r\n\r\n    setElements(elementsCopy, true);\r\n  };\r\n\r\n  const handleMouseDown = event => {\r\n    if (action === \"writing\") return;\r\n\r\n    var { clientX , clientY } = event;\r\n    clientX = clientX - 75;\r\n    clientY = clientY - 40;\r\n    if (tool === \"selection\") {\r\n      const element = getElementAtPosition(clientX, clientY, elements);\r\n      if (element) {\r\n        if (element.type === \"pencil\") {\r\n          const xOffsets = element.points.map(point => clientX - point.x );\r\n          const yOffsets = element.points.map(point => clientY - point.y);\r\n          setSelectedElement({ ...element, xOffsets, yOffsets });\r\n        } else {\r\n          const offsetX = clientX - element.x1 ;\r\n          const offsetY = clientY - element.y1;\r\n          setSelectedElement({ ...element, offsetX, offsetY });\r\n        }\r\n        setElements(prevState => prevState);\r\n\r\n        if (element.position === \"inside\") {\r\n          setAction(\"moving\");\r\n        } else {\r\n          setAction(\"resizing\");\r\n        }\r\n      }\r\n    } else {\r\n      const id = elements.length;\r\n      const element = createElement(id, clientX, clientY, clientX, clientY, tool);\r\n      setElements(prevState => [...prevState, element]);\r\n      setSelectedElement(element);\r\n\r\n      setAction(tool === \"text\" ? \"writing\" : \"drawing\");\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = event => {\r\n    var { clientX , clientY } = event;\r\n    clientX = clientX - 75;\r\n    clientY = clientY - 40;\r\n\r\n\r\n    if (tool === \"selection\") {\r\n      const element = getElementAtPosition(clientX, clientY, elements);\r\n      event.target.style.cursor = element ? cursorForPosition(element.position) : \"default\";\r\n    }\r\n\r\n    if (action === \"drawing\") {\r\n      const index = elements.length - 1;\r\n      const { x1, y1 } = elements[index];\r\n      updateElement(index, x1, y1, clientX, clientY, tool);\r\n    } else if (action === \"moving\") {\r\n      if (selectedElement.type === \"pencil\") {\r\n        const newPoints = selectedElement.points.map((_, index) => ({\r\n          x: clientX - selectedElement.xOffsets[index],\r\n          y: clientY - selectedElement.yOffsets[index],\r\n        }));\r\n        const elementsCopy = [...elements];\r\n        elementsCopy[selectedElement.id] = {\r\n          ...elementsCopy[selectedElement.id],\r\n          points: newPoints,\r\n        };\r\n        setElements(elementsCopy, true);\r\n      } else {\r\n        const { id, x1, x2, y1, y2, type, offsetX, offsetY } = selectedElement;\r\n        const width = x2 - x1;\r\n        const height = y2 - y1;\r\n        const newX1 = clientX - offsetX;\r\n        const newY1 = clientY - offsetY;\r\n        const options = type === \"text\" ? { text: selectedElement.text } : {};\r\n        updateElement(id, newX1, newY1, newX1 + width, newY1 + height, type, options);\r\n      }\r\n    } else if (action === \"resizing\") {\r\n      const { id, type, position, ...coordinates } = selectedElement;\r\n      const { x1, y1, x2, y2 } = resizedCoordinates(clientX, clientY, position, coordinates);\r\n      updateElement(id, x1, y1, x2, y2, type);\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = event => {\r\n    const { clientX, clientY } = event;\r\n    if (selectedElement) {\r\n      if (\r\n        selectedElement.type === \"text\" &&\r\n        clientX - selectedElement.offsetX === selectedElement.x1 &&\r\n        clientY - selectedElement.offsetY === selectedElement.y1\r\n      ) {\r\n        setAction(\"writing\");\r\n        return;\r\n      }\r\n\r\n      const index = selectedElement.id;\r\n      const { id, type } = elements[index];\r\n      if ((action === \"drawing\" || action === \"resizing\") && adjustmentRequired(type)) {\r\n        const { x1, y1, x2, y2 } = adjustElementCoordinates(elements[index]);\r\n        updateElement(id, x1, y1, x2, y2, type);\r\n      }\r\n    }\r\n\r\n    if (action === \"writing\") return;\r\n\r\n    setAction(\"none\");\r\n    setSelectedElement(null);\r\n  };\r\n\r\n  const handleBlur = event => {\r\n    const { id, x1, y1, type } = selectedElement;\r\n    setAction(\"none\");\r\n    setSelectedElement(null);\r\n    updateElement(id, x1, y1, null, null, type, { text: event.target.value });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{display: 'flex',  justifyContent:'center', alignItems:'center', padding:'20px'}}>\r\n      <div style={{ position: \"fixed\",display: 'flex', justifyContent:'center', alignItems:'center' }}>\r\n        <input\r\n          type=\"radio\"\r\n          id=\"selection\"\r\n          checked={tool === \"selection\"}\r\n          onChange={() => setTool(\"selection\")}\r\n          style={{ display:'none' }}\r\n        />\r\n        <label htmlFor=\"selection\" style={{ padding:'10px', borderRadius: '10px 0px 0px 10px', backgroundColor: '#2951a7', color:'white'}}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\" fill=\"currentColor\" className=\"bi bi-check2-square\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z\"/>\r\n        <path d=\"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z\"/>\r\n        </svg></label>\r\n        <input type=\"radio\" id=\"line\" checked={tool === \"line\"} onChange={() => setTool(\"line\")} style={{ display:'none' }} />\r\n        <label htmlFor=\"line\" style={{padding:'10px', borderRadius: '0px', backgroundColor: '#2951a7', color:'white'}}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\"  fill=\"currentColor\" className=\"bi bi-arrows-collapse\" viewBox=\"0 0 16 16\">\r\n        <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z\"/>\r\n        </svg></label>\r\n        <input\r\n          type=\"radio\"\r\n          id=\"rectangle\"\r\n          checked={tool === \"rectangle\"}\r\n          onChange={() => setTool(\"rectangle\")}\r\n          style={{ display:'none', marginLeft: '50rem' }}\r\n        />\r\n        <label htmlFor=\"rectangle\" style={{ padding:'10px', borderRadius: '0px', backgroundColor: '#2951a7', color:'white'}}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\"  fill=\"currentColor\" className=\"bi bi-square\" viewBox=\"0 0 16 16\">\r\n          <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n          </svg></label>\r\n        <input\r\n          type=\"radio\"\r\n          id=\"pencil\"\r\n          checked={tool === \"pencil\"}\r\n          onChange={() => setTool(\"pencil\")}\r\n          style={{ display:'none'}}\r\n        />\r\n        <label htmlFor=\"pencil\" style={{ padding:'10px', borderRadius: '0px', backgroundColor: '#2951a7', color:'white'}}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\" fill=\"currentColor\" className=\"bi bi-pencil\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\r\n        </svg></label>\r\n        <input type=\"radio\" id=\"text\" checked={tool === \"text\"} onChange={() => setTool(\"text\")} style={{ display:'none' }} />\r\n        <label htmlFor=\"text\" style={{ padding:'10px', borderRadius: '0px 10px 10px 0px', backgroundColor: '#2951a7', color:'white'}}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\"  fill=\"currentColor\" className=\"bi bi-card-text\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z\"/>\r\n        <path d=\"M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z\"/>\r\n      </svg></label>\r\n      </div>\r\n\r\n      </div>\r\n      \r\n      <div style={{ position: \"fixed\", bottom: 0, padding: 10 }}>\r\n        <button onClick={undo} style={{ backgroundColor: 'transparent', border:'0px transparent' }}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\" fill=\"currentColor\" className=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\r\n        <path fillRule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"/>\r\n        </svg></button>\r\n        <button onClick={redo} style={{backgroundColor: 'transparent', border:'0px transparent', padding:'10px' }}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\" fill=\"currentColor\" className=\"bi bi-arrow-right\" viewBox=\"0 0 16 16\">\r\n        <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"/>\r\n        </svg></button>\r\n        <button onClick={download} style={{backgroundColor: 'transparent', border:'0px transparent', padding:'10px' }}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"35\" fill=\"currentColor\" className=\"bi bi-download\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"/>\r\n        <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"/>\r\n      </svg></button>\r\n      </div>\r\n      {action === \"writing\" ? (\r\n        <textarea\r\n          ref={textAreaRef}\r\n          onBlur={handleBlur}\r\n          style={{\r\n            position: \"fixed\",\r\n            top: selectedElement.y1 - 2,\r\n            left: selectedElement.x1,\r\n            font: \"24px sans-serif\",\r\n            margin: 0,\r\n            padding: 0,\r\n            border: 0,\r\n            outline: 0,\r\n            resize: \"auto\",\r\n            overflow: \"hidden\",\r\n            whiteSpace: \"pre\",\r\n            background: \"transparent\",\r\n          }}\r\n        />\r\n      ) : null}\r\n      <canvas\r\n        id=\"canvas\"\r\n        width={window.innerWidth}\r\n        height={window.innerHeight}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n      >\r\n        Canvas\r\n      </canvas>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"DrawingCanvas\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}