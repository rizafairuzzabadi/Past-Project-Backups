(this["webpackJsonpexcalidraw-tutorial"]=this["webpackJsonpexcalidraw-tutorial"]||[]).push([[0],{13:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),c=n.n(i),o=(n(18),n(12)),l=n(6),s=n.n(l),u=n(10),d=n(1),p=n(2),h=n(3),f=n(7),x=n(11),g=["id","type","position"],v=f.a.generator(),w=function(e,t,n,a,r,i){switch(i){case"line":case"rectangle":return{id:e,x1:t,y1:n,x2:a,y2:r,type:i,roughElement:"line"===i?v.line(t,n,a,r):v.rectangle(t,n,a-t,r-n)};case"pencil":return{id:e,type:i,points:[{x:t,y:n}]};case"text":return{id:e,type:i,x1:t,y1:n,x2:a,y2:r,text:""};default:throw new Error("Type not recognised: ".concat(i))}},y=function(e,t,n,a,r){return Math.abs(e-n)<5&&Math.abs(t-a)<5?r:null},m=function(e,t,n,a,r,i){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o={x:e,y:t},l={x:n,y:a},s={x:r,y:i},u=E(o,l)-(E(o,s)+E(l,s));return Math.abs(u)<c?"inside":null},b=function(e,t,n){var a=n.type,r=n.x1,i=n.x2,c=n.y1,o=n.y2;switch(a){case"line":var l=m(r,c,i,o,e,t),s=y(e,t,r,c,"start"),u=y(e,t,i,o,"end");return s||u||l;case"rectangle":var d=y(e,t,r,c,"tl"),p=y(e,t,i,c,"tr"),h=y(e,t,r,o,"bl"),f=y(e,t,i,o,"br");return d||p||h||f||(e>=r&&e<=i&&t>=c&&t<=o?"inside":null);case"pencil":return n.points.some((function(a,r){var i=n.points[r+1];return!!i&&null!=m(a.x,a.y,i.x,i.y,e,t,5)}))?"inside":null;case"text":return e>=r&&e<=i&&t>=c&&t<=o?"inside":null;default:throw new Error("Type not recognised: ".concat(a))}},E=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},O=function(e,t,n){return n.map((function(n){return Object(h.a)(Object(h.a)({},n),{},{position:b(e,t,n)})})).find((function(e){return null!==e.position}))},j=function(e,t,n){switch(n.type){case"line":case"rectangle":e.draw(n.roughElement);break;case"pencil":var a=function(e){if(!e.length)return"";var t=e.reduce((function(e,t,n,a){var r=Object(p.a)(t,2),i=r[0],c=r[1],o=Object(p.a)(a[(n+1)%a.length],2),l=o[0],s=o[1];return e.push(i,c,(i+l)/2,(c+s)/2),e}),["M"].concat(Object(d.a)(e[0]),["Q"]));return t.push("Z"),t.join(" ")}(Object(x.a)(n.points));t.fill(new Path2D(a));break;case"text":t.textBaseline="top",t.font="24px sans-serif",t.fillText(n.text,n.x1,n.y1);break;default:throw new Error("Type not recognised: ".concat(n.type))}},k=function(){var e=function(e){var t=Object(a.useState)(0),n=Object(p.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([e]),o=Object(p.a)(c,2),l=o[0],s=o[1];return[l[r],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="function"===typeof e?e(l[r]):e;if(t){var a=Object(d.a)(l);a[r]=n,s(a)}else{var c=Object(d.a)(l).slice(0,r+1);s([].concat(Object(d.a)(c),[n])),i((function(e){return e+1}))}},function(){return r>0&&i((function(e){return e-1}))},function(){return r<l.length-1&&i((function(e){return e+1}))}]}([]),t=Object(p.a)(e,4),n=t[0],i=t[1],c=t[2],l=t[3],x=Object(a.useState)("none"),v=Object(p.a)(x,2),y=v[0],m=v[1],b=Object(a.useState)("text"),E=Object(p.a)(b,2),k=E[0],C=E[1],M=Object(a.useState)(null),z=Object(p.a)(M,2),B=z[0],L=z[1],R=Object(a.useRef)(),A=(Object(a.useRef)(null),function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("canvas"),n=t.toDataURL("image/png"),document.write('<img src="'+n+'"/>'),e.next=5,fetch(n);case 5:return e.next=7,e.sent.blob();case 7:a=e.sent,r=URL.createObjectURL(a),(i=document.createElement("a")).href=r,i.download="image.png",i.click();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(a.useLayoutEffect)((function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var a=f.a.canvas(e);n.forEach((function(e){"writing"===y&&B.id===e.id||j(a,t,e)}))}),[n,y,B]),Object(a.useEffect)((function(){var e=function(e){(e.metaKey||e.ctrlKey)&&"z"===e.key&&(e.shiftKey?l():c())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[c,l]),Object(a.useEffect)((function(){var e=R.current;"writing"===y&&(e.focus(),e.value=B.text)}),[y,B]);var V=function(e,t,a,r,c,o,l){var s=Object(d.a)(n);switch(o){case"line":case"rectangle":s[e]=w(e,t,a,r,c,o);break;case"pencil":s[e].points=[].concat(Object(d.a)(s[e].points),[{x:r,y:c}]);break;case"text":var u=document.getElementById("canvas").getContext("2d").measureText(l.text).width;s[e]=Object(h.a)(Object(h.a)({},w(e,t,a,t+u,a+24,o)),{},{text:l.text});break;default:throw new Error("Type not recognised: ".concat(o))}i(s,!0)};return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}},r.a.createElement("div",{style:{position:"fixed",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("input",{type:"radio",id:"selection",checked:"selection"===k,onChange:function(){return C("selection")},style:{display:"none"}}),r.a.createElement("label",{htmlFor:"selection",style:{padding:"10px",borderRadius:"10px 0px 0px 10px",backgroundColor:"#2951a7",color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-check2-square",viewBox:"0 0 16 16"},r.a.createElement("path",{d:"M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"}),r.a.createElement("path",{d:"m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"}))),r.a.createElement("input",{type:"radio",id:"line",checked:"line"===k,onChange:function(){return C("line")},style:{display:"none"}}),r.a.createElement("label",{htmlFor:"line",style:{padding:"10px",borderRadius:"0px",backgroundColor:"#2951a7",color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-arrows-collapse",viewBox:"0 0 16 16"},r.a.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"}))),r.a.createElement("input",{type:"radio",id:"rectangle",checked:"rectangle"===k,onChange:function(){return C("rectangle")},style:{display:"none",marginLeft:"50rem"}}),r.a.createElement("label",{htmlFor:"rectangle",style:{padding:"10px",borderRadius:"0px",backgroundColor:"#2951a7",color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-square",viewBox:"0 0 16 16"},r.a.createElement("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}))),r.a.createElement("input",{type:"radio",id:"pencil",checked:"pencil"===k,onChange:function(){return C("pencil")},style:{display:"none"}}),r.a.createElement("label",{htmlFor:"pencil",style:{padding:"10px",borderRadius:"0px",backgroundColor:"#2951a7",color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-pencil",viewBox:"0 0 16 16"},r.a.createElement("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}))),r.a.createElement("input",{type:"radio",id:"text",checked:"text"===k,onChange:function(){return C("text")},style:{display:"none"}}),r.a.createElement("label",{htmlFor:"text",style:{padding:"10px",borderRadius:"0px 10px 10px 0px",backgroundColor:"#2951a7",color:"white"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-card-text",viewBox:"0 0 16 16"},r.a.createElement("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),r.a.createElement("path",{d:"M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"}))))),r.a.createElement("div",{style:{position:"fixed",bottom:0,padding:10}},r.a.createElement("button",{onClick:c,style:{backgroundColor:"transparent",border:"0px transparent"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16"},r.a.createElement("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"}))),r.a.createElement("button",{onClick:l,style:{backgroundColor:"transparent",border:"0px transparent",padding:"10px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-arrow-right",viewBox:"0 0 16 16"},r.a.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"}))),r.a.createElement("button",{onClick:A,style:{backgroundColor:"transparent",border:"0px transparent",padding:"10px"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-download",viewBox:"0 0 16 16"},r.a.createElement("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}),r.a.createElement("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"})))),"writing"===y?r.a.createElement("textarea",{ref:R,onBlur:function(e){var t=B.id,n=B.x1,a=B.y1,r=B.type;m("none"),L(null),V(t,n,a,null,null,r,{text:e.target.value})},style:{position:"fixed",top:B.y1-2,left:B.x1,font:"24px sans-serif",margin:0,padding:0,border:0,outline:0,resize:"auto",overflow:"hidden",whiteSpace:"pre",background:"transparent"}}):null,r.a.createElement("canvas",{id:"canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:function(e){if("writing"!==y){var t=e.clientX,a=e.clientY;if(t-=75,a-=40,"selection"===k){var r=O(t,a,n);if(r){if("pencil"===r.type){var c=r.points.map((function(e){return t-e.x})),o=r.points.map((function(e){return a-e.y}));L(Object(h.a)(Object(h.a)({},r),{},{xOffsets:c,yOffsets:o}))}else{var l=t-r.x1,s=a-r.y1;L(Object(h.a)(Object(h.a)({},r),{},{offsetX:l,offsetY:s}))}i((function(e){return e})),"inside"===r.position?m("moving"):m("resizing")}}else{var u=n.length,p=w(u,t,a,t,a,k);i((function(e){return[].concat(Object(d.a)(e),[p])})),L(p),m("text"===k?"writing":"drawing")}}},onMouseMove:function(e){var t=e.clientX,a=e.clientY;if(t-=75,a-=40,"selection"===k){var r=O(t,a,n);e.target.style.cursor=r?function(e){switch(e){case"tl":case"br":case"start":case"end":return"nwse-resize";case"tr":case"bl":return"nesw-resize";default:return"move"}}(r.position):"default"}if("drawing"===y){var c=n.length-1,l=n[c],s=l.x1,u=l.y1;V(c,s,u,t,a,k)}else if("moving"===y)if("pencil"===B.type){var p=B.points.map((function(e,n){return{x:t-B.xOffsets[n],y:a-B.yOffsets[n]}})),f=Object(d.a)(n);f[B.id]=Object(h.a)(Object(h.a)({},f[B.id]),{},{points:p}),i(f,!0)}else{var x=B.id,v=B.x1,w=B.x2,m=B.y1,b=B.y2,E=B.type,j=B.offsetX,C=B.offsetY,M=w-v,z=b-m,L=t-j,R=a-C,A="text"===E?{text:B.text}:{};V(x,L,R,L+M,R+z,E,A)}else if("resizing"===y){var H=B.id,N=B.type,S=B.position,I=Object(o.a)(B,g),T=function(e,t,n,a){var r=a.x1,i=a.y1,c=a.x2,o=a.y2;switch(n){case"tl":case"start":return{x1:e,y1:t,x2:c,y2:o};case"tr":return{x1:r,y1:t,x2:e,y2:o};case"bl":return{x1:e,y1:i,x2:c,y2:t};case"br":case"end":return{x1:r,y1:i,x2:e,y2:t};default:return null}}(t,a,S,I),X=T.x1,Y=T.y1,F=T.x2,D=T.y2;V(H,X,Y,F,D,N)}},onMouseUp:function(e){var t=e.clientX,a=e.clientY;if(B){if("text"===B.type&&t-B.offsetX===B.x1&&a-B.offsetY===B.y1)return void m("writing");var r=B.id,i=n[r],c=i.id,o=i.type;if(("drawing"===y||"resizing"===y)&&function(e){return["line","rectangle"].includes(e)}(o)){var l=function(e){var t=e.type,n=e.x1,a=e.y1,r=e.x2,i=e.y2;if("rectangle"===t){var c=Math.min(n,r),o=Math.max(n,r);return{x1:c,y1:Math.min(a,i),x2:o,y2:Math.max(a,i)}}return n<r||n===r&&a<i?{x1:n,y1:a,x2:r,y2:i}:{x1:r,y1:i,x2:n,y2:a}}(n[r]),s=l.x1,u=l.y1,d=l.x2,p=l.y2;V(c,s,u,d,p,o)}}"writing"!==y&&(m("none"),L(null))}},"Canvas"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("DrawingCanvas")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.9133fe99.chunk.js.map